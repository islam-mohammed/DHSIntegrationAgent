<UserControl x:Class="DHSIntegrationAgent.App.UI.Views.AttachmentsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel>
                <TextBlock Text="Attachments" FontSize="20" FontWeight="SemiBold"/>
                <TextBlock Text="Upload queue, failures, retries, OnlineURL (screen-only)." Foreground="{StaticResource BrushMuted}" Margin="0,4,0,0"/>
            </StackPanel>
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Bottom">
                <Button   FontSize="13.5" Height="33" Margin="5,0" BorderBrush="#32729B"  Foreground="#32729B"
                          Style="{StaticResource MaterialDesignOutlinedButton}" materialDesign:ButtonAssist.CornerRadius="5" 
                          Cursor="Hand"    
                          Command="{Binding RefreshCommand}" IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}">

                    <StackPanel  Margin="0,0,0,0" Orientation="Horizontal" HorizontalAlignment="Left">
                        <materialDesign:PackIcon Kind="Sync" Width="17" Height="17" Margin="0,0,5,0"/>
                        <TextBlock  VerticalAlignment="Center" Foreground="#32729B" > Refresh</TextBlock>
                    </StackPanel> 
                </Button>

                <Button  FontSize="13.5" Height="34" Margin="10,0,0,0" Cursor="Hand" Style="{StaticResource IconTextBtn}" Grid.Column="1" Command="{Binding RetrySelectedCommand}">
                    <StackPanel  Margin="10,0,10,0" Orientation="Horizontal" HorizontalAlignment="Left">
                        <materialDesign:PackIcon Kind="Refresh" Width="17" Height="17" Margin="0,0,5,0"/>
                        <TextBlock  VerticalAlignment="Center" Foreground="#fff" > Retry Selected</TextBlock>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>

        <Border Grid.Row="1"  Style="{StaticResource DashboardCardStyle}">
            <DataGrid
                 ColumnHeaderStyle="{StaticResource TableHeaderStyle}"
                 RowStyle="{StaticResource TableRowStyle}"
                 CellStyle="{StaticResource TableCellStyle}"
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      SelectionMode="Single" 
                      HeadersVisibility="Column"
                      Background="White"
                      RowBackground="White"
                      AlternatingRowBackground="#FFF9FAFB"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Auto"  
                      GridLinesVisibility="None"
                      HorizontalGridLinesBrush="Transparent"
                      VerticalGridLinesBrush="Transparent"
                      BorderThickness="0"
                      ItemsSource="{Binding UploadQueue}"
                      SelectedItem="{Binding Selected}"  >
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ClaimId" Binding="{Binding ClaimId}" Width="*"/>
                    <DataGridTextColumn Header="FileName" Binding="{Binding FileName}" Width="2*"/>  
                    <!-- Status Column with Colored Badges -->
                    <DataGridTemplateColumn Header="Status" Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Border x:Name="StatusBorder"
                                                Padding="10,5"
                                                CornerRadius="8"
                                                MinWidth="80"
                                                HorizontalAlignment="Left">
                                    <TextBlock x:Name="StatusText"
                                                       Text="{Binding Status}"
                                                       FontSize="11"
                                                       FontWeight="SemiBold"
                                                       VerticalAlignment="Center" 
                                                       HorizontalAlignment="Center"/>
                                </Border>
                                <DataTemplate.Triggers>
                                    <!-- Pending Status -->
                                    <DataTrigger Binding="{Binding Status}" Value="Pending">
                                        <Setter TargetName="StatusBorder"
                                                        Property="Background"
                                                        Value="#FEF5E4"/>
                                        <Setter TargetName="StatusText"
                                                        Property="Foreground"
                                                        Value="#f09100"/>
                                    </DataTrigger> 
                                </DataTemplate.Triggers>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    
                    
                    <DataGridTextColumn Header="FailCount" Binding="{Binding FailCount}" Width="*"/>
                    <DataGridTextColumn Header="OnlineURL" Binding="{Binding OnlineUrl}" Width="3*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
