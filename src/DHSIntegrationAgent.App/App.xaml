<Application x:Class="DHSIntegrationAgent.App.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:DHSIntegrationAgent.App.UI.ViewModels" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:views="clr-namespace:DHSIntegrationAgent.App.UI.Views"
             xmlns:converters="clr-namespace:DHSIntegrationAgent.App.UI.Converters"
             xmlns:mvvm="clr-namespace:DHSIntegrationAgent.App.UI.Mvvm">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Material Theme -->
                <materialDesign:BundledTheme
                    BaseTheme="Light"
                    PrimaryColor="Indigo"
                    SecondaryColor="DeepOrange"/>

                <!-- Controls -->
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Button.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.TextBox.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.ComboBox.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Card.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.PasswordBox.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.ProgressBar.xaml"/>

                <!-- TabControl styles -->
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.TabControl.xaml" />

                <!-- Colors -->
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Teal.xaml" />

                <!-- Styles -->
                <ResourceDictionary Source="pack://application:,,,/DHSIntegrationAgent.App;component/UI/style/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>

            <DataTemplate DataType="{x:Type vm:LoginViewModel}">
                <views:LoginView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:EngineControlViewModel}">
                <views:EngineControlView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:SetupViewModel}">
                <views:SetupView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
                <views:DashboardView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:BatchesViewModel}">
                <views:BatchesView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:DomainMappingsViewModel}">
                <views:DomainMappingsView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:AttachmentsViewModel}">
                <views:AttachmentsView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:DiagnosticsViewModel}">
                <views:DiagnosticsView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:SettingsViewModel}">
                <views:SettingsView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:ContactViewModel}">
                <views:ContactView />
            </DataTemplate>

            <!-- Theme / Brushes -->
            <SolidColorBrush x:Key="BrushBg" Color="#FFF6F7FB"/>
            <SolidColorBrush x:Key="BrushCard" Color="#FFFFFFFF"/>
            <SolidColorBrush x:Key="BrushBorder" Color="#FFE3E6EE"/>
            <SolidColorBrush x:Key="BrushText" Color="#FF111827"/>
            <SolidColorBrush x:Key="BrushMuted" Color="#FF6B7280"/>
            <SolidColorBrush x:Key="BrushDanger" Color="#FFB91C1C"/>
            <SolidColorBrush x:Key="BrushPrimary" Color="#32729B"/>
            <SolidColorBrush x:Key="BrushPrimaryHover" Color="#8E81A9"/>
            <SolidColorBrush x:Key="BrushSecondary" Color="#008080"/>
            <SolidColorBrush x:Key="BrushSecondaryHover" Color="#009999"/>
            <SolidColorBrush x:Key="BrushBorderSecondary" Color="#008080"/>
            <SolidColorBrush x:Key="BrushBorderSecondaryHover" Color="#009999"/>

            <CornerRadius x:Key="Radius10">10</CornerRadius>
            <Thickness x:Key="FieldSpacing">0,14,0,0</Thickness>

            <Style TargetType="{x:Type Window}">
                <Setter Property="FontFamily" Value="Segoe UI"/>
                <Setter Property="Foreground" Value="{StaticResource BrushText}"/>
                <Setter Property="Background" Value="{StaticResource BrushBg}"/>
            </Style>

            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="{StaticResource BrushText}"/>
            </Style>

            <!-- TextBox style -->
            <Style TargetType="{x:Type TextBox}">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Padding" Value="12,10"/>
                <Setter Property="MinHeight" Value="42"/>
                <Setter Property="BorderBrush" Value="{StaticResource BrushBorder}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TextBox}">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="{StaticResource Radius10}">
                                <Grid>
                                    <TextBlock x:Name="Watermark"
                                               Text="{TemplateBinding Tag}"
                                               Foreground="{StaticResource BrushMuted}"
                                               Margin="12,0,12,0"
                                               VerticalAlignment="Center"
                                               IsHitTestVisible="False"
                                               Visibility="Collapsed"/>
                                    <ScrollViewer x:Name="PART_ContentHost"/>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                                </Trigger>

                                <Trigger Property="IsKeyboardFocused" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource BrushPrimary}"/>
                                </Trigger>

                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.65"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- PasswordBox style -->
            <Style TargetType="{x:Type PasswordBox}">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Padding" Value="12,10"/>
                <Setter Property="MinHeight" Value="42"/>
                <Setter Property="BorderBrush" Value="{StaticResource BrushBorder}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="mvvm:PasswordBoxAssistant.BindPassword" Value="True"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type PasswordBox}">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="{StaticResource Radius10}">
                                <Grid>
                                    <TextBlock x:Name="Watermark"
                                               Text="{TemplateBinding Tag}"
                                               Foreground="{StaticResource BrushMuted}"
                                               Margin="12,0,12,0"
                                               VerticalAlignment="Center"
                                               IsHitTestVisible="False"
                                               Visibility="Collapsed"/>
                                    <ScrollViewer x:Name="PART_ContentHost"/>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger Property="mvvm:PasswordBoxAssistant.BoundPassword" Value="">
                                    <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                                </Trigger>
                                <Trigger Property="mvvm:PasswordBoxAssistant.BoundPassword" Value="{x:Null}">
                                    <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                                </Trigger>

                                <Trigger Property="IsKeyboardFocused" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource BrushPrimary}"/>
                                </Trigger>

                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.65"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Button style -->
            <Style TargetType="{x:Type Button}">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Background" Value="{StaticResource BrushPrimary}"/>
                <Setter Property="Padding" Value="14,10"/>
                <Setter Property="MinHeight" Value="42"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    CornerRadius="{StaticResource Radius10}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="{StaticResource BrushPrimaryHover}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.90"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.55"/>
                                    <Setter Property="Cursor" Value="Arrow"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

        </ResourceDictionary>
    </Application.Resources>
</Application>